 # 模块开发指南（模式A：单体分包并行开发）
 
 面向每位领取模块的同学，按照本文流程即可自洽完成开发并顺利合并。
 
 ## 1. 领取与分支
 - 领取模块：用户（user）/商品（product）/购物车（cart）/订单（order）/搜索（search）
 - 分支命名：`feature/<module>/<your_name>-<short_desc>`（例：`feature/user/alex-auth`）
 - 提交规范：`<type>(<module>): <message>`（例：`feat(user): 注册接口`）
   - type 建议：feat、fix、refactor、docs、test、chore
 
 ## 2. 目录与包结构
 - 前端目录：`web/HwMall/modules/<module>/`
   - 建议子目录：`pages/`、`components/`、`services/`、`hooks/`
   - 公共复用：`web/shared/{components,utils,assets}`
 - 后端目录：`service/hwMallServicedemo`
   - Java 包：`com.yourorg.hwmall.<module>.{controller,service,service.impl,repository,dto}`
   - 公共包：`com.yourorg.hwmall.common.{dto,utils,config}`
   - 资源文件：`src/main/resources/{application.yml, db/migration, mapper}`
 
 > 将 `com.yourorg.hwmall` 替换为实际包名，并与启动类的 `scanBasePackages` 保持一致。
 
 ## 3. 环境准备
 - Node 版本：LTS（建议 18+）
 - 包管理：npm 或 pnpm 二选一（团队统一）
 - JDK：17（或与项目 pom 指定版本一致）
 - 构建工具：Maven
 - 数据库：按项目 README 配置本地连接与初始化脚本
 
 ## 4. 前端开发步骤（以 <module> 为例）
 1) 在 `web/HwMall/modules/<module>/services/` 新建 API 封装（示例：`api.ts`）
    - 统一前缀：`/api/<module>`（例：`/api/user/login`）
    - 仅通过此处调用后端，不跨模块直接访问他人接口
 2) 在 `pages/` 完成页面，`components/` 放该模块私有组件
 3) 公共组件/工具优先从 `web/shared/` 复用；若需新增，请组件化、文档化
 4) 本地运行：配置环境变量（如 `BASE_URL`），确保 Mock/联调切换方便
 5) 自测：
    - 基本交互、接口成功/失败分支
    - 边界输入（空、超长、特殊字符）
    - 页面路由与返回导航
 
 ## 5. 后端开发步骤（以 <module> 为例）
 1) 包结构：`com.yourorg.hwmall.<module>.{controller,service,service.impl,repository,dto}`
 2) 控制器路由前缀：`/api/<module>`（例：`/api/order/create`）
 3) 业务隔离：
    - 不直接依赖其他模块实现类，如需复用仅通过 `common` DTO/工具或暴露的服务接口
 4) 数据库迁移（推荐 Flyway）：
    - 路径：`src/main/resources/db/migration`
    - 命名：`V<序号>__<module>_<summary>.sql`（例：`V1__user_init.sql`）
 5) 统一响应与异常：
    - 使用公共响应模型（如 `ApiResponse<T>`）
    - 全局异常处理（如 `@ControllerAdvice`）保持错误码与信息一致
 6) 自测：
    - 单元/接口测试覆盖主要用例
    - 启动应用后，用 Postman/HTTP 文件验证主要接口
 
 ## 6. 接口与数据契约
 - 文档优先：在 `docs/api/` 维护接口说明或 OpenAPI 片段
 - 变更流程：先更新文档 → 再实现与联调；破坏性变更使用版本前缀（如 `/api/v2/...`）或向后兼容策略（先加字段、延后移除）
 - 响应约定：
   - 成功：`{ code: 0, message: "OK", data: ... }`
   - 失败：`{ code: <非0>, message: "原因", data: null }`
 
 ## 7. 代码风格与质量
 - 代码风格：遵循项目 linter/formatter 约定
 - 命名：包名/类名/方法名清晰表达职责，避免缩写
 - 控制层薄、服务层聚合、仓储层专注数据访问
 - 注释：只写“必要的”非显而易见信息（约束、边界、特殊处理原因）
 - 测试：新增或变更的功能需配套测试或最小可验证示例
 
 ## 8. 提交流程（Checklist）
 - [ ] 代码仅修改所属模块或公共层必要部分
 - [ ] 接口/DTO 变更已更新 `docs/api/`
 - [ ] Flyway 脚本已编写并在本地成功迁移
 - [ ] 前后端本地自测通过（含失败分支）
 - [ ] README/注释已补充关键说明
 - [ ] 提交信息规范，PR 描述含：变更点、影响面、联调方式
 
 ## 9. 常见问题（FAQ）
 - Q：需要跨模块数据怎么办？
   - A：先评估是否应提炼到 `common`；若仍需跨模块访问，通过暴露服务接口或新增 API，而非直接依赖实现类。
 - Q：数据库字段要改名/删除？
   - A：采用向后兼容策略：先新增/兼容读取，通知相关同学调整，最后再清理旧字段。
 - Q：接口返回结构能否自定义？
   - A：请统一使用公共响应模型，便于前端统一处理与日志追踪。
 
 ## 10. 联系方式
 - 模块负责人：在 `分功.md` 查看对应同学
 - 公共层与规范问题：在群内 @项目维护者 或提交 Issue 说明
 
 ---
 按本文执行即可在模式A下顺畅并行开发，降低冲突与集成成本。祝开发顺利！

