# 用户模块开发指南

## 📋 模块概述

负责用户注册、登录、个人信息管理等功能的开发。

## 👥 负责人员

1 人负责

## 🎯 开发任务

### 任务一：用户注册与登录功能

#### 前端开发任务

**工作目录：** `web/HwMall/src/`

1. **创建组件文件**
   - 位置：`components/User/`
   - 需要创建的文件：
     - `Login.vue` - 登录组件
     - `Register.vue` - 注册组件

2. **创建页面视图**
   - 位置：`views/User/`
   - 需要创建的文件：
     - `LoginView.vue` - 登录页面
     - `RegisterView.vue` - 注册页面

3. **创建 API 请求文件**
   - 位置：`api/`
   - 需要创建的文件：
     - `user.js` - 用户相关的 API 请求

4. **具体实现内容**
   - 设计注册页面布局（用户名、密码、确认密码输入框）
   - 设计登录页面布局（用户名、密码输入框）
   - 实现表单验证：
     - 检查用户名是否为空
     - 检查两次输入密码是否一致
     - 密码强度验证（可选）
   - 使用 Axios 发送注册/登录请求到后端
   - 接收后端返回结果并更新页面提示信息
   - 登录成功后保存用户信息（localStorage/sessionStorage）
   - 配置路由跳转

#### 后端开发任务

**工作目录：** `service/hwMallServicedemo/src/main/java/com/peng/hwmallservicedemo/`

1. **创建实体类（Model）**
   - 位置：`model/user/`
   - 需要创建的文件：
     - `User.java` - 用户实体类
   - 字段：user_id, username, password, phone, email

2. **创建数据访问层（Repository）**
   - 位置：`repository/user/`
   - 需要创建的文件：
     - `UserRepository.java` - 用户数据访问接口
   - 方法：
     - `findByUsername()` - 根据用户名查询
     - `save()` - 保存用户信息
     - `existsByUsername()` - 检查用户名是否存在

3. **创建服务层（Service）**
   - 位置：`service/user/`
   - 需要创建的文件：
     - `UserService.java` - 用户服务接口
     - `UserServiceImpl.java` - 用户服务实现类
   - 方法：
     - `register()` - 用户注册
     - `login()` - 用户登录
     - `validateUsername()` - 验证用户名唯一性

4. **创建控制器（Controller）**
   - 位置：`controller/user/`
   - 需要创建的文件：
     - `UserController.java` - 用户控制器
   - 接口：
     - `POST /api/user/register` - 用户注册
     - `POST /api/user/login` - 用户登录

5. **具体实现内容**
   - 接收前端发送的用户信息
   - 用户名唯一性验证（注册时）
   - 用户名和密码匹配验证（登录时）
   - 密码加密存储（建议使用 BCrypt）
   - 操作数据库存储/查询用户信息
   - 返回 JSON 格式结果给前端

---

### 任务二：用户详情功能

#### 前端开发任务

**工作目录：** `web/HwMall/src/`

1. **创建组件文件**
   - 位置：`components/User/`
   - 需要创建的文件：
     - `UserProfile.vue` - 个人资料组件

2. **创建页面视图**
   - 位置：`views/User/`
   - 需要创建的文件：
     - `UserProfileView.vue` - 个人中心页面

3. **更新 API 请求文件**
   - 位置：`api/user.js`
   - 添加方法：
     - `getUserInfo()` - 获取用户信息
     - `updateUserInfo()` - 更新用户信息

4. **具体实现内容**
   - 开发个人中心页面布局
   - 展示用户基本信息（用户名、手机号、邮箱等）
   - 提供修改个人信息的表单
   - 实现信息修改功能
   - 使用 Axios 发送更新请求
   - 接收后端返回结果并更新页面显示

#### 后端开发任务

**工作目录：** `service/hwMallServicedemo/src/main/java/com/peng/hwmallservicedemo/`

1. **更新数据访问层**
   - 位置：`repository/user/UserRepository.java`
   - 添加方法：
     - `findById()` - 根据 ID 查询用户
     - `updateUser()` - 更新用户信息

2. **更新服务层**
   - 位置：`service/user/UserService.java` 和 `UserServiceImpl.java`
   - 添加方法：
     - `getUserById()` - 获取用户详情
     - `updateUserInfo()` - 更新用户信息

3. **更新控制器**
   - 位置：`controller/user/UserController.java`
   - 添加接口：
     - `GET /api/user/{id}` - 获取用户详情
     - `PUT /api/user/{id}` - 更新用户信息

4. **具体实现内容**
   - 接收前端请求
   - 查询或更新数据库中的用户信息
   - 返回操作结果给前端

---

## 📊 数据库表结构

### 用户表（user）

| 字段名   | 数据类型    | 约束条件   | 描述         |
| -------- | ----------- | ---------- | ------------ |
| user_id  | INT         | 主键、自增 | 用户唯一标识 |
| username | VARCHAR(50) | 非空、唯一 | 用户名       |
| password | VARCHAR(50) | 非空       | 密码         |
| phone    | VARCHAR(20) |            | 手机号码     |
| email    | VARCHAR(50) |            | 邮箱         |

---

## 🔗 API 接口规范

### 1. 用户注册
- **URL:** `POST /api/user/register`
- **请求参数:**
  ```json
  {
    "username": "string",
    "password": "string",
    "confirmPassword": "string",
    "phone": "string",
    "email": "string"
  }
  ```
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "注册成功",
    "data": null
  }
  ```

### 2. 用户登录
- **URL:** `POST /api/user/login`
- **请求参数:**
  ```json
  {
    "username": "string",
    "password": "string"
  }
  ```
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "登录成功",
    "data": {
      "userId": 1,
      "username": "string",
      "token": "string"
    }
  }
  ```

### 3. 获取用户详情
- **URL:** `GET /api/user/{id}`
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "userId": 1,
      "username": "string",
      "phone": "string",
      "email": "string"
    }
  }
  ```

### 4. 更新用户信息
- **URL:** `PUT /api/user/{id}`
- **请求参数:**
  ```json
  {
    "phone": "string",
    "email": "string"
  }
  ```
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "更新成功",
    "data": null
  }
  ```

---

## ✅ 开发检查清单

### 前端
- [ ] 创建 Login.vue 组件
- [ ] 创建 Register.vue 组件
- [ ] 创建 UserProfile.vue 组件
- [ ] 创建对应的 View 页面
- [ ] 实现表单验证
- [ ] 配置路由
- [ ] 创建 user.js API 文件
- [ ] 实现 Axios 请求
- [ ] 处理登录状态存储
- [ ] 测试所有功能

### 后端
- [ ] 创建 User.java 实体类
- [ ] 创建 UserRepository.java
- [ ] 创建 UserService.java 接口
- [ ] 创建 UserServiceImpl.java 实现类
- [ ] 创建 UserController.java
- [ ] 实现注册接口
- [ ] 实现登录接口
- [ ] 实现获取用户详情接口
- [ ] 实现更新用户信息接口
- [ ] 配置 MyBatis Mapper
- [ ] 添加密码加密
- [ ] 测试所有接口

---

## 📝 注意事项

1. **密码安全**：后端必须对密码进行加密存储，建议使用 BCrypt
2. **表单验证**：前端和后端都要进行数据验证
3. **错误处理**：统一错误返回格式，提供友好的错误提示
4. **登录状态**：使用 Token 或 Session 管理用户登录状态
5. **代码规范**：遵循团队代码规范，添加必要的注释
6. **测试**：开发完成后进行充分测试，确保功能正常

---

## 🤝 协作说明

- 前后端开发人员需要提前约定好 API 接口格式
- 遇到问题及时在团队群里沟通
- 代码提交前先进行本地测试
- 使用 Git 进行版本控制，提交信息要清晰明确
