# 购物车模块测试指南

## 🚀 快速开始测试

### 1. 启动后端服务

```bash
cd service/hwMallServicedemo
mvn spring-boot:run
```

确保后端服务运行在 `http://localhost:8080`

### 2. 启动前端服务

```bash
cd web/HwMall
npm install  # 如果还没安装依赖
npm run dev
```

前端服务会运行在 `http://localhost:5173`（或 Vite 分配的端口）

### 3. 访问测试页面

在浏览器中打开：`http://localhost:5173`

## 📋 测试步骤

### 测试1：添加商品到购物车

1. 在首页的"快速测试"表单中：
   - **用户ID**：输入 `1`（或你的测试用户ID）
   - **商品ID**：输入 `1`（确保数据库中存在该商品）
   - **数量**：输入 `2`

2. 点击"添加到购物车"按钮

3. 查看结果：
   - 如果成功，会显示绿色成功消息和购物车商品数量
   - 如果失败，会显示红色错误消息

4. 点击导航栏的"购物车"查看购物车列表

### 测试2：查看购物车列表

1. 点击导航栏的"购物车"链接
2. 页面会显示购物车中的所有商品
3. 每个商品显示：
   - 商品名称
   - 商品价格
   - 数量（可修改）
   - 小计金额

### 测试3：修改商品数量

1. 在购物车页面，找到要修改的商品
2. 点击数量输入框旁边的 `+` 或 `-` 按钮
3. 或者直接在输入框中输入新数量
4. 失去焦点后会自动保存
5. 小计金额会自动更新

### 测试4：删除商品

1. 在购物车页面，找到要删除的商品
2. 点击商品右侧的"删除"按钮
3. 确认删除
4. 商品会从列表中移除

### 测试5：全选/取消全选

1. 在购物车页面，点击表头的"全选"复选框
2. 所有商品都会被选中
3. 再次点击可以取消全选
4. 也可以单独选择某个商品

### 测试6：计算总金额

1. 选择一些商品（勾选复选框）
2. 查看页面底部的"合计"金额
3. 总金额 = 所有选中商品的小计之和

### 测试7：清空购物车

1. 在购物车页面，点击底部的"清空购物车"按钮
2. 确认操作
3. 所有商品都会被删除

## 🗄️ 数据库准备

### 确保数据库中有测试数据

在测试前，确保数据库中有以下数据：

1. **用户表（user）**：至少有一个用户
   ```sql
   INSERT INTO user (username, password, phone, email) 
   VALUES ('testuser', '123456', '13800138000', 'test@example.com');
   ```

2. **商品表（product）**：至少有一个商品
   ```sql
   INSERT INTO product (name, price, stock, description, category_id) 
   VALUES ('测试商品', 99.99, 100, '这是一个测试商品', 1);
   ```

3. **购物车表（cart）**：可以预先添加一些测试数据
   ```sql
   INSERT INTO cart (user_id, product_id, quantity) 
   VALUES (1, 1, 2);
   ```

## 🔍 测试检查点

### 功能检查

- [ ] 添加商品到购物车成功
- [ ] 购物车列表正确显示
- [ ] 修改数量功能正常
- [ ] 删除商品功能正常
- [ ] 全选/取消全选功能正常
- [ ] 总金额计算正确
- [ ] 清空购物车功能正常
- [ ] 购物车数量徽章显示正确

### 错误处理检查

- [ ] 商品不存在时显示错误提示
- [ ] 库存不足时显示错误提示
- [ ] 网络错误时显示友好提示
- [ ] 数量输入验证（不能小于1，不能大于库存）

### UI/UX 检查

- [ ] 页面布局美观
- [ ] 响应式设计（在不同屏幕尺寸下正常显示）
- [ ] 加载状态显示
- [ ] 操作反馈及时（成功/失败提示）

## 🐛 常见问题

### 问题1：无法连接到后端

**症状**：添加商品时显示"网络错误"

**解决方法**：
- 检查后端服务是否启动
- 检查 `src/api/request.js` 中的 `baseURL` 是否正确
- 检查浏览器控制台是否有 CORS 错误

### 问题2：商品不存在

**症状**：添加商品时显示"商品不存在"

**解决方法**：
- 确保数据库中有所使用的商品ID
- 检查商品表是否有数据

### 问题3：库存不足

**症状**：添加商品时显示"库存不足"

**解决方法**：
- 检查商品的库存数量
- 减少添加的数量

### 问题4：购物车列表为空

**症状**：购物车页面显示"购物车是空的"

**解决方法**：
- 先添加一些商品到购物车
- 检查用户ID是否正确
- 检查数据库中是否有该用户的购物车数据

## 📊 测试数据建议

### 推荐测试场景

1. **正常流程**：
   - 用户ID: 1
   - 商品ID: 1
   - 数量: 2

2. **边界测试**：
   - 数量 = 1（最小值）
   - 数量 = 库存数量（最大值）
   - 数量 > 库存数量（应该失败）

3. **异常测试**：
   - 不存在的商品ID
   - 不存在的用户ID
   - 负数数量
   - 0 数量

## 💡 测试技巧

1. **使用浏览器开发者工具**：
   - 打开 Network 标签查看 API 请求
   - 打开 Console 查看错误信息
   - 使用 Application 标签查看 localStorage

2. **检查后端日志**：
   - 查看 Spring Boot 控制台输出
   - 查看 MyBatis SQL 日志

3. **数据库验证**：
   - 直接查询数据库验证数据是否正确
   - 使用 SQL 工具（如 Navicat、DBeaver）查看数据

## 📝 测试报告模板

测试完成后，可以记录以下信息：

```
测试日期：2025-11-19
测试人员：[你的名字]

功能测试结果：
- 添加商品：✅ 通过
- 查看列表：✅ 通过
- 修改数量：✅ 通过
- 删除商品：✅ 通过
- 全选功能：✅ 通过
- 总金额计算：✅ 通过
- 清空购物车：✅ 通过

发现的问题：
1. [问题描述]
2. [问题描述]

建议改进：
1. [改进建议]
2. [改进建议]
```

## 🎯 下一步

测试通过后，可以：
1. 集成到完整的商城系统中
2. 添加更多功能（如商品图片显示）
3. 优化用户体验
4. 添加单元测试


