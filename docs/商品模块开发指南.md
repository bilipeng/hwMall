# 商品模块开发指南

## 📋 模块概述

负责商品展示、商品详情、商品分类与筛选功能的开发。

## 👥 负责人员

1 人负责

## 🎯 开发任务

### 任务一：商品展示功能

#### 前端开发任务

**工作目录：** `web/HwMall/src/`

1. **创建组件文件**
   - 位置：`components/Product/`
   - 需要创建的文件：
     - `ProductList.vue` - 商品列表组件
     - `ProductCard.vue` - 商品卡片组件（单个商品展示）
     - `ProductCategory.vue` - 商品分类导航组件

2. **创建页面视图**
   - 位置：`views/Product/`
   - 需要创建的文件：
     - `ProductListView.vue` - 商品列表页面
     - `HomeView.vue` - 首页（展示部分商品）

3. **创建 API 请求文件**
   - 位置：`api/`
   - 需要创建的文件：
     - `product.js` - 商品相关的 API 请求

4. **具体实现内容**
   - 实现首页商品展示布局
   - 实现商品列表页面布局
   - 使用 Axios 向后端请求商品数据
   - 渲染商品信息（图片、名称、价格等）
   - 实现分页功能（分页组件）
   - 实现分类导航功能
   - 点击商品跳转到详情页
   - 响应式布局设计

#### 后端开发任务

**工作目录：** `service/hwMallServicedemo/src/main/java/com/peng/hwmallservicedemo/`

1. **创建实体类（Model）**
   - 位置：`model/product/`
   - 需要创建的文件：
     - `Product.java` - 商品实体类
     - `ProductCategory.java` - 商品分类实体类
   - Product 字段：product_id, name, price, stock, description, category_id
   - ProductCategory 字段：category_id, category_name, parent_id

2. **创建数据访问层（Repository）**
   - 位置：`repository/product/`
   - 需要创建的文件：
     - `ProductRepository.java` - 商品数据访问接口
     - `ProductCategoryRepository.java` - 商品分类数据访问接口
   - 方法：
     - `findAll()` - 查询所有商品
     - `findByPage()` - 分页查询商品
     - `findByCategoryId()` - 根据分类查询商品
     - `findAllCategories()` - 查询所有分类

3. **创建服务层（Service）**
   - 位置：`service/product/`
   - 需要创建的文件：
     - `ProductService.java` - 商品服务接口
     - `ProductServiceImpl.java` - 商品服务实现类
   - 方法：
     - `getProductList()` - 获取商品列表（支持分页）
     - `getProductsByCategory()` - 根据分类获取商品
     - `getAllCategories()` - 获取所有分类

4. **创建控制器（Controller）**
   - 位置：`controller/product/`
   - 需要创建的文件：
     - `ProductController.java` - 商品控制器
   - 接口：
     - `GET /api/product/list` - 获取商品列表（支持分页和分类筛选）
     - `GET /api/product/category` - 获取商品分类列表

5. **具体实现内容**
   - 根据请求参数（分类 ID、分页参数）查询数据库
   - 返回商品数据列表给前端
   - 支持分页功能
   - 返回 JSON 格式数据

---

### 任务二：商品详情功能

#### 前端开发任务

**工作目录：** `web/HwMall/src/`

1. **创建组件文件**
   - 位置：`components/Product/`
   - 需要创建的文件：
     - `ProductDetail.vue` - 商品详情组件

2. **创建页面视图**
   - 位置：`views/Product/`
   - 需要创建的文件：
     - `ProductDetailView.vue` - 商品详情页面

3. **更新 API 请求文件**
   - 位置：`api/product.js`
   - 添加方法：
     - `getProductDetail()` - 获取商品详情

4. **具体实现内容**
   - 开发商品详情页面布局
   - 展示商品详细信息（描述、规格参数、库存等）
   - 通过商品 ID 向后端请求数据
   - 渲染商品详情到页面
   - 实现"添加到购物车"按钮
   - 实现商品数量选择器
   - 图片展示（可以实现图片轮播）

#### 后端开发任务

**工作目录：** `service/hwMallServicedemo/src/main/java/com/peng/hwmallservicedemo/`

1. **更新数据访问层**
   - 位置：`repository/product/ProductRepository.java`
   - 添加方法：
     - `findById()` - 根据 ID 查询商品详情

2. **更新服务层**
   - 位置：`service/product/ProductService.java` 和 `ProductServiceImpl.java`
   - 添加方法：
     - `getProductById()` - 获取商品详情

3. **更新控制器**
   - 位置：`controller/product/ProductController.java`
   - 添加接口：
     - `GET /api/product/{id}` - 获取商品详情

4. **具体实现内容**
   - 根据商品 ID 查询数据库
   - 获取商品的详细信息
   - 返回给前端

---

### 任务三：商品分类与筛选功能

#### 前端开发任务

**工作目录：** `web/HwMall/src/`

1. **创建组件文件**
   - 位置：`components/Product/`
   - 需要创建的文件：
     - `ProductFilter.vue` - 商品筛选组件

2. **更新 API 请求文件**
   - 位置：`api/product.js`
   - 添加方法：
     - `getFilteredProducts()` - 获取筛选后的商品

3. **具体实现内容**
   - 构建商品分类导航组件
   - 构建筛选组件（价格区间筛选）
   - 用户点击分类或选择筛选条件时发送请求
   - 使用 Axios 获取筛选后的商品数据
   - 更新商品列表展示

#### 后端开发任务

**工作目录：** `service/hwMallServicedemo/src/main/java/com/peng/hwmallservicedemo/`

1. **更新数据访问层**
   - 位置：`repository/product/ProductRepository.java`
   - 添加方法：
     - `findByFilter()` - 根据筛选条件查询商品

2. **更新服务层**
   - 位置：`service/product/ProductService.java` 和 `ProductServiceImpl.java`
   - 添加方法：
     - `getFilteredProducts()` - 根据筛选条件获取商品

3. **更新控制器**
   - 位置：`controller/product/ProductController.java`
   - 添加接口：
     - `GET /api/product/filter` - 根据筛选条件获取商品

4. **具体实现内容**
   - 根据分类 ID 和筛选条件查询数据库
   - 支持价格区间筛选
   - 返回符合条件的商品列表

---

## 📊 数据库表结构

### 商品表（product）

| 字段名      | 数据类型      | 约束条件   | 描述                       |
| ----------- | ------------- | ---------- | -------------------------- |
| product_id  | INT           | 主键、自增 | 商品唯一标识               |
| name        | VARCHAR(100)  | 非空       | 商品名称                   |
| price       | DECIMAL(10,2) | 非空       | 商品价格                   |
| stock       | INT           | 非空       | 库存数量                   |
| description | TEXT          |            | 商品描述                   |
| category_id | INT           | 外键       | 商品分类（关联商品分类表） |

### 商品分类表（product_category）

| 字段名        | 数据类型    | 约束条件   | 描述                     |
| ------------- | ----------- | ---------- | ------------------------ |
| category_id   | INT         | 主键、自增 | 分类唯一标识             |
| category_name | VARCHAR(50) | 非空       | 分类名称                 |
| parent_id     | INT         |            | 父分类ID（用于多级分类） |

---

## 🔗 API 接口规范

### 1. 获取商品列表
- **URL:** `GET /api/product/list`
- **请求参数:**
  - `page` (int): 页码，默认 1
  - `pageSize` (int): 每页数量，默认 10
  - `categoryId` (int, 可选): 分类 ID
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 100,
      "list": [
        {
          "productId": 1,
          "name": "商品名称",
          "price": 99.99,
          "stock": 100,
          "description": "商品描述",
          "categoryId": 1
        }
      ]
    }
  }
  ```

### 2. 获取商品详情
- **URL:** `GET /api/product/{id}`
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "productId": 1,
      "name": "商品名称",
      "price": 99.99,
      "stock": 100,
      "description": "商品详细描述",
      "categoryId": 1,
      "categoryName": "分类名称"
    }
  }
  ```

### 3. 获取商品分类列表
- **URL:** `GET /api/product/category`
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "success",
    "data": [
      {
        "categoryId": 1,
        "categoryName": "电子产品",
        "parentId": 0
      }
    ]
  }
  ```

### 4. 筛选商品
- **URL:** `GET /api/product/filter`
- **请求参数:**
  - `categoryId` (int, 可选): 分类 ID
  - `minPrice` (decimal, 可选): 最低价格
  - `maxPrice` (decimal, 可选): 最高价格
  - `page` (int): 页码
  - `pageSize` (int): 每页数量
- **返回结果:**
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 50,
      "list": [...]
    }
  }
  ```

---

## ✅ 开发检查清单

### 前端
- [ ] 创建 ProductList.vue 组件
- [ ] 创建 ProductCard.vue 组件
- [ ] 创建 ProductDetail.vue 组件
- [ ] 创建 ProductCategory.vue 组件
- [ ] 创建 ProductFilter.vue 组件
- [ ] 创建对应的 View 页面
- [ ] 实现分页功能
- [ ] 实现分类导航
- [ ] 实现筛选功能
- [ ] 配置路由
- [ ] 创建 product.js API 文件
- [ ] 实现所有 Axios 请求
- [ ] 测试所有功能

### 后端
- [ ] 创建 Product.java 实体类
- [ ] 创建 ProductCategory.java 实体类
- [ ] 创建 ProductRepository.java
- [ ] 创建 ProductCategoryRepository.java
- [ ] 创建 ProductService.java 接口
- [ ] 创建 ProductServiceImpl.java 实现类
- [ ] 创建 ProductController.java
- [ ] 实现商品列表接口
- [ ] 实现商品详情接口
- [ ] 实现分类列表接口
- [ ] 实现筛选接口
- [ ] 配置 MyBatis Mapper
- [ ] 实现分页功能
- [ ] 测试所有接口

---

## 📝 注意事项

1. **性能优化**：商品列表要考虑分页，避免一次性加载过多数据
2. **图片处理**：商品图片路径要统一管理，建议使用相对路径或 CDN
3. **数据验证**：价格、库存等数据要进行合法性验证
4. **缓存策略**：商品分类等不常变动的数据可以考虑缓存
5. **代码复用**：商品卡片组件要设计成可复用的
6. **响应式设计**：商品列表要适配不同屏幕尺寸

---

## 🤝 协作说明

- 与购物车模块开发人员协调"添加到购物车"功能的接口
- 与搜索模块开发人员协调商品数据的展示格式
- 前后端开发人员需要提前约定好 API 接口格式
- 遇到问题及时在团队群里沟通
- 代码提交前先进行本地测试
- 使用 Git 进行版本控制，提交信息要清晰明确
