# 商城系统接口文档

## 一、用户模块接口

### 用户注册

  * **接口地址** ：`POST /api/users/register`
  * **请求参数** ：
    * username（用户名，必填，字符串，最大长度 50）
    * password（密码，必填，字符串，最大长度 50）
    * confirm\_password（确认密码，必填，字符串，最大长度 50）
    * phone（手机号，可选，字符串，最大长度 20）
    * email（邮箱，可选，字符串，最大长度 50）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "注册成功",
  "data": null
}
```
    * 注册失败响应示例：
```json
{
  "code": 400,
  "message": "用户名已存在",
  "data": null
}
```

### 用户登录

  * **接口地址** ：`POST /api/users/login`
  * **请求参数** ：
    * username（用户名，必填，字符串，最大长度 50）
    * password（密码，必填，字符串，最大长度 50）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "user_id": 1,
    "username": "testuser",
    "phone": "12345678901",
    "email": "test@example.com"
  }
}
```
    * 登录失败响应示例：
```json
{
  "code": 400,
  "message": "用户名或密码错误",
  "data": null
}
```

### 获取用户信息

  * **接口地址** ：`GET /api/users/:user_id`
  * **请求参数** ：无
  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "user_id": 1,
    "username": "testuser",
    "phone": "12345678901",
    "email": "test@example.com"
  }
}
```
    * 失败响应示例：
```json
{
  "code": 404,
  "message": "用户不存在",
  "data": null
}
```

### 更新用户信息

  * **接口地址** ：`PUT /api/users/:user_id`
  * **请求参数** ：
    * username（用户名，可选，字符串，最大长度 50）
    * password（密码，可选，字符串，最大长度 50）
    * phone（手机号，可选，字符串，最大长度 20）
    * email（邮箱，可选，字符串，最大长度 50）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "更新成功",
  "data": null
}
```
    * 失败响应示例：
```json
{
  "code": 400,
  "message": "更新失败",
  "data": null
}
```

## 二、商品模块接口

### 获取商品列表

  * **接口地址** ：`GET /api/products`
  * **请求参数** ：
    * category_id（分类 ID，可选，整数）
    * page（页码，可选，默认值 1，整数）
    * size（每页大小，可选，默认值 10，整数）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "products": [
      {
        "product_id": 1,
        "name": "商品1",
        "price": 100.0,
        "stock": 100,
        "description": "商品1的描述",
        "category_id": 1
      },
      {
        "product_id": 2,
        "name": "商品2",
        "price": 200.0,
        "stock": 200,
        "description": "商品2的描述",
        "category_id": 1
      }
    ],
    "total": 2
  }
}
```
    * 失败响应示例：
```json
{
  "code": 500,
  "message": "获取失败",
  "data": null
}
```

### 获取商品详情

  * **接口地址** ：`GET /api/products/:product_id`
  * **请求参数** ：无
  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "product_id": 1,
    "name": "商品1",
    "price": 100.0,
    "stock": 100,
    "description": "商品1的详细描述",
    "category_id": 1
  }
}
```
    * 失败响应示例：
```json
{
  "code": 404,
  "message": "商品不存在",
  "data": null
}
```

## 三、购物车模块接口

### 添加商品到购物车

  * **接口地址** ：`POST /api/cart/items`
  * **请求参数** ：
    * user_id（用户 ID，必填，整数）
    * product_id（商品 ID，必填，整数）
    * quantity（数量，必填，默认值 1，整数）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "添加成功",
  "data": null
}
```
    * 失败响应示例：
```json
{
  "code": 400,
  "message": "添加失败",
  "data": null
}
```

### 获取购物车商品列表

  * **接口地址** ：`GET /api/cart/items/:user_id`
  * **请求参数** ：无
  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "cart_items": [
      {
        "cart_id": 1,
        "product_id": 1,
        "product_name": "商品1",
        "price": 100.0,
        "quantity": 2
      },
      {
        "cart_id": 2,
        "product_id": 2,
        "product_name": "商品2",
        "price": 200.0,
        "quantity": 1
      }
    ]
  }
}
```
    * 失败响应示例：
```json
{
  "code": 404,
  "message": "购物车为空",
  "data": null
}
```

### 更新购物车商品数量

  * **接口地址** ：`PUT /api/cart/items/:cart_id`
  * **请求参数** ：
    * quantity（数量，必填，整数）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "更新成功",
  "data": null
}
```
    * 失败响应示例：
```json
{
  "code": 400,
  "message": "更新失败",
  "data": null
}
```

### 删除购物车商品

  * **接口地址** ：`DELETE /api/cart/items/:cart_id`
  * **请求参数** ：无
  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "删除成功",
  "data": null
}
```
    * 失败响应示例：
```json
{
  "code": 400,
  "message": "删除失败",
  "data": null
}
```

## 四、订单模块接口

### 创建订单

  * **接口地址** ：`POST /api/orders`
  * **请求参数** ：
    * user_id（用户 ID，必填，整数）
    * cart_items（购物车商品列表，必填，数组）
    * address（收货地址，必填，字符串）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "order_id": 1,
    "order_date": "2024-02-14T10:00:00Z",
    "total_amount": 300.0,
    "status": "待付款",
    "address": "收货地址"
  }
}
```
    * 失败响应示例：
```json
{
  "code": 400,
  "message": "创建失败",
  "data": null
}
```

### 获取订单列表

  * **接口地址** ：`GET /api/orders/:user_id`
  * **请求参数** ：
    * page（页码，可选，默认值 1，整数）
    * size（每页大小，可选，默认值 10，整数）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "orders": [
      {
        "order_id": 1,
        "order_date": "2024-02-14T10:00:00Z",
        "total_amount": 300.0,
        "status": "待付款",
        "address": "收货地址"
      },
      {
        "order_id": 2,
        "order_date": "2024-02-15T11:00:00Z",
        "total_amount": 200.0,
        "status": "待发货",
        "address": "收货地址"
      }
    ],
    "total": 2
  }
}
```
    * 失败响应示例：
```json
{
  "code": 404,
  "message": "无订单数据",
  "data": null
}
```

### 获取订单详情

  * **接口地址** ：`GET /api/orders/:order_id`
  * **请求参数** ：无
  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "order_id": 1,
    "order_date": "2024-02-14T10:00:00Z",
    "total_amount": 300.0,
    "status": "待付款",
    "address": "收货地址",
    "products": [
      {
        "product_id": 1,
        "product_name": "商品1",
        "price": 100.0,
        "quantity": 2
      },
      {
        "product_id": 2,
        "product_name": "商品2",
        "price": 200.0,
        "quantity": 1
      }
    ]
  }
}
```
    * 失败响应示例：
```json
{
  "code": 404,
  "message": "订单不存在",
  "data": null
}
```

## 五、搜索模块接口

### 搜索功能

  * **接口地址** ：`GET /api/search/products`
  * **请求参数** ：
    * keyword（关键词，必填，字符串）
    * page（页码，可选，默认值 1，整数）
    * size（每页大小，可选，默认值 10，整数）

  * **响应格式** ：
    * 成功响应示例：
```json
{
  "code": 200,
  "message": "搜索成功",
  "data": {
    "products": [
      {
        "product_id": 1,
        "name": "商品1",
        "price": 100.0,
        "stock": 100,
        "description": "商品1的描述"
      },
      {
        "product_id": 2,
        "name": "商品2",
        "price": 200.0,
        "stock": 200,
        "description": "商品2的描述"
      }
    ],
    "total": 2
  }
}
```
    * 失败响应示例：
```json
{
  "code": 500,
  "message": "搜索失败",
  "data": null
}
```

