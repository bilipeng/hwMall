# 订单管理接口测试文档

## 基础信息
- **服务地址**: `http://localhost:8080`
- **基础路径**: `/api/order`

---

## 1. 创建订单

### 接口信息
- **请求方式**: `POST`
- **完整地址**: `http://localhost:8080/api/order/create`
- **Content-Type**: `application/json`

### Headers
```
userId: 1
Content-Type: application/json
```

### 请求体示例 (Body - raw JSON)
```json
{
  "receiverName": "张三",
  "receiverPhone": "13800138000",
  "receiverAddress": "北京市朝阳区某某街道123号",
  "items": [
    {
      "productId": 1,
      "productName": "华为手机",
      "productImage": "https://example.com/image1.jpg",
      "price": 2999.00,
      "quantity": 2
    },
    {
      "productId": 2,
      "productName": "苹果手机",
      "productImage": "https://example.com/image2.jpg",
      "price": 5999.00,
      "quantity": 1
    }
  ]
}
```

### 成功响应示例
```json
{
  "code": 200,
  "message": "订单创建成功",
  "data": {
    "id": 1,
    "orderNo": "20241215143045123",
    "userId": 1,
    "totalAmount": 11997.00,
    "status": 0,
    "createTime": "2024-12-15T14:30:45",
    "updateTime": "2024-12-15T14:30:45",
    "receiverName": "张三",
    "receiverPhone": "13800138000",
    "receiverAddress": "北京市朝阳区某某街道123号",
    "orderItems": [
      {
        "id": 1,
        "orderId": 1,
        "productId": 1,
        "productName": "华为手机",
        "productImage": "https://example.com/image1.jpg",
        "price": 2999.00,
        "quantity": 2,
        "totalPrice": 5998.00
      },
      {
        "id": 2,
        "orderId": 1,
        "productId": 2,
        "productName": "苹果手机",
        "productImage": "https://example.com/image2.jpg",
        "price": 5999.00,
        "quantity": 1,
        "totalPrice": 5999.00
      }
    ]
  }
}
```

### 错误响应示例
```json
{
  "code": 400,
  "message": "收货人姓名不能为空",
  "data": null
}
```

---

## 2. 获取订单列表

### 接口信息
- **请求方式**: `GET`
- **完整地址**: `http://localhost:8080/api/order/list`
- **Content-Type**: 无需设置

### Headers
```
userId: 1
```

### 请求参数
无（userId 通过 Header 传递）

### 成功响应示例
```json
{
  "code": 200,
  "message": "获取成功",
  "data": [
    {
      "id": 1,
      "orderNo": "20241215143045123",
      "userId": 1,
      "totalAmount": 11997.00,
      "status": 0,
      "createTime": "2024-12-15T14:30:45",
      "updateTime": "2024-12-15T14:30:45",
      "receiverName": "张三",
      "receiverPhone": "13800138000",
      "receiverAddress": "北京市朝阳区某某街道123号",
      "orderItems": [
        {
          "id": 1,
          "orderId": 1,
          "productId": 1,
          "productName": "华为手机",
          "productImage": "https://example.com/image1.jpg",
          "price": 2999.00,
          "quantity": 2,
          "totalPrice": 5998.00
        }
      ]
    }
  ]
}
```

### 错误响应示例
```json
{
  "code": 400,
  "message": "用户ID不能为空",
  "data": null
}
```

---

## 3. 获取订单详情

### 接口信息
- **请求方式**: `GET`
- **完整地址**: `http://localhost:8080/api/order/detail/{orderId}`
- **Content-Type**: 无需设置

### Headers
无特殊要求

### 路径参数
- `orderId`: 订单ID（路径参数）

### 请求示例
```
GET http://localhost:8080/api/order/detail/1
```

### 成功响应示例
```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "id": 1,
    "orderNo": "20241215143045123",
    "userId": 1,
    "totalAmount": 11997.00,
    "status": 0,
    "createTime": "2024-12-15T14:30:45",
    "updateTime": "2024-12-15T14:30:45",
    "receiverName": "张三",
    "receiverPhone": "13800138000",
    "receiverAddress": "北京市朝阳区某某街道123号",
    "orderItems": [
      {
        "id": 1,
        "orderId": 1,
        "productId": 1,
        "productName": "华为手机",
        "productImage": "https://example.com/image1.jpg",
        "price": 2999.00,
        "quantity": 2,
        "totalPrice": 5998.00
      },
      {
        "id": 2,
        "orderId": 1,
        "productId": 2,
        "productName": "苹果手机",
        "productImage": "https://example.com/image2.jpg",
        "price": 5999.00,
        "quantity": 1,
        "totalPrice": 5999.00
      }
    ]
  }
}
```

### 错误响应示例（订单不存在）
```json
{
  "code": 404,
  "message": "订单不存在",
  "data": null
}
```

---

## Postman 测试步骤

### 1. 创建订单测试
1. 打开 Postman，选择 **POST** 方法
2. 输入地址: `http://localhost:8080/api/order/create`
3. 在 **Headers** 标签页添加:
   - Key: `userId`, Value: `1`
   - Key: `Content-Type`, Value: `application/json`
4. 在 **Body** 标签页选择 **raw** 和 **JSON**，输入上面的请求体示例
5. 点击 **Send** 发送请求
6. 记录返回的订单ID，用于后续测试

### 2. 获取订单列表测试
1. 选择 **GET** 方法
2. 输入地址: `http://localhost:8080/api/order/list`
3. 在 **Headers** 标签页添加:
   - Key: `userId`, Value: `1`
4. 点击 **Send** 发送请求

### 3. 获取订单详情测试
1. 选择 **GET** 方法
2. 输入地址: `http://localhost:8080/api/order/detail/1`（将1替换为实际的订单ID）
3. 直接点击 **Send** 发送请求

---

## 订单状态说明
- `0`: 待支付
- `1`: 已支付
- `2`: 已发货
- `3`: 已完成
- `4`: 已取消

---

## 注意事项
1. 确保服务已启动在 `8080` 端口
2. 确保数据库连接正常
3. `userId` 需要在 Header 中传递（创建订单和获取订单列表）
4. 创建订单时，`items` 数组不能为空
5. 所有必填字段都需要填写，否则会返回 400 错误

